<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.waiter.mapper.OrderMapper">
    <insert id="insertOrder" useGeneratedKeys="true" keyProperty="order_id">
        insert into t_order (user_id, table_id, total_price, memo, status, create_time, num_people)
        values (#{user_id},#{table_id},#{total_price},#{memo},#{status},#{create_time},#{num_people});
    </insert>
    <insert id="insertAssociation">
        insert into food_order
        values (#{order_id},#{food_id},#{num_food},#{status});
    </insert>

    <select id="queryById" resultType="com.waiter.entity.TOrder">
        select *
        from t_order
        where order_id = #{order_id};
    </select>
    <select id="selectOrderToPay" resultType="com.waiter.entity.TOrder">
        select *
        from t_order
        where user_id = #{user_id} and status = 2;
    </select>
    <select id="selectOrderFood" resultType="com.waiter.vo.FoodStatistic">
        select food_name,description,category,price,is_like
        from food natural join food_order
        where order_id = #{order_id};
    </select>
</mapper>